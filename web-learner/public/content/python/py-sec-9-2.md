å¥½çš„ï¼Œæ€»å»ºç­‘å¸ˆã€‚ä½œä¸ºæ‚¨çš„ Python æŠ€èƒ½é‡‘å­—å¡”ä¸“å®¶å’ŒæŠ€æœ¯æ•™è‚²è€…ï¼Œæˆ‘å°†ä¸¥æ ¼æŒ‰ç…§æ‚¨æä¾›çš„â€œæ•™å­¦è®¾è®¡å›¾â€ï¼Œå°†å…³äº `pytest` çš„çŸ¥è¯†ç‚¹è½¬åŒ–ä¸ºä¸€ç¯‡é«˜è´¨é‡çš„ Markdown æ•™ç¨‹ã€‚

---

### ğŸ¯ æ ¸å¿ƒç›®æ ‡ (Core Goal)

æœ¬èŠ‚çš„æ ¸å¿ƒç›®æ ‡æ˜¯è®©ä½ æ·±åˆ»ç†è§£**è‡ªåŠ¨åŒ–æµ‹è¯•å¯¹äºä¿éšœè½¯ä»¶è´¨é‡çš„è‡³å…³é‡è¦æ€§**ï¼Œå¹¶æŒæ¡ä½¿ç”¨ä¸šç•Œä¸»æµçš„ `pytest` æ¡†æ¶æ¥ç¼–å†™å’Œè¿è¡ŒåŸºç¡€çš„å•å…ƒæµ‹è¯•ã€‚å­¦å®Œæœ¬èŠ‚ï¼Œä½ å°†èƒ½å¤Ÿä¸ºè‡ªå·±çš„å‡½æ•°ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•æ¥éªŒè¯ä»£ç çš„æ­£ç¡®æ€§ï¼Œä»è€Œè¿ˆå‡ºæ„å»ºå¥å£®ã€å¯é ç¨‹åºçš„å…³é”®ä¸€æ­¥ã€‚

### ğŸ”‘ æ ¸å¿ƒè¯­æ³•ä¸å‚æ•° (Core Syntax & Parameters)

`pytest` çš„è®¾è®¡å“²å­¦æ˜¯ç®€æ´å’Œçº¦å®šä¼˜äºé…ç½®ã€‚å…¥é—¨æ—¶ï¼Œä½ åªéœ€è¦æŒæ¡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒçº¦å®šå’Œå‘½ä»¤ã€‚

1.  **å®‰è£… (Installation)**:
    é€šè¿‡ pip å®‰è£… `pytest` åº“ã€‚
    ```bash
    pip install pytest
    ```

2.  **æ–‡ä»¶å’Œå‡½æ•°å‘½åçº¦å®š (Discovery Convention)**:
    `pytest` ä¼šè‡ªåŠ¨å‘ç°éœ€è¦æ‰§è¡Œçš„æµ‹è¯•ï¼Œæ— éœ€ä»»ä½•é…ç½®ï¼Œåªè¦ä½ éµå¾ªä»¥ä¸‹å‘½åè§„åˆ™ï¼š
    *   **æµ‹è¯•æ–‡ä»¶**: æ–‡ä»¶åå¿…é¡»ä»¥ `test_` å¼€å¤´æˆ–ä»¥ `_test.py` ç»“å°¾ (ä¾‹å¦‚ `test_calculator.py` æˆ– `calculator_test.py`)ã€‚
    *   **æµ‹è¯•å‡½æ•°**: åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰ä»¥ `test_` å¼€å¤´çš„å‡½æ•°éƒ½ä¼šè¢«è¯†åˆ«ä¸ºæµ‹è¯•ç”¨ä¾‹ (ä¾‹å¦‚ `def test_addition():`)ã€‚

3.  **æ–­è¨€è¯­å¥ (Assertion)**:
    `pytest` ä½¿ç”¨ Python å†…ç½®çš„ `assert` å…³é”®å­—æ¥éªŒè¯ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å®ƒçš„è¡¨è¾¾åŠ›éå¸¸å¼ºï¼Œä¸”å¤±è´¥æ—¶èƒ½æä¾›è¯¦ç»†çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    ```python
    assert <è¡¨è¾¾å¼>  # å¦‚æœè¡¨è¾¾å¼ä¸º Falseï¼Œæµ‹è¯•å¤±è´¥
    assert <å®é™…ç»“æœ> == <é¢„æœŸç»“æœ>
    assert <æŸä¸ªå€¼> in <æŸä¸ªé›†åˆ>
    ```

4.  **è¿è¡Œå‘½ä»¤ (Execution Command)**:
    åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç›´æ¥è¿è¡Œ `pytest` å‘½ä»¤å³å¯ã€‚
    ```bash
    # è¿è¡Œæ‰€æœ‰å‘ç°çš„æµ‹è¯•
    pytest

    # æä¾›æ›´è¯¦ç»†çš„è¾“å‡ºä¿¡æ¯ (-v for verbose)
    pytest -v

    # é‡åˆ°ç¬¬ä¸€ä¸ªå¤±è´¥å°±åœæ­¢æ‰§è¡Œ (-x for exit first)
    pytest -x
    ```

### ğŸ’» åŸºç¡€ç”¨æ³• (Basic Usage)

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„â€œç¼–ç -æµ‹è¯•-è¿è¡Œâ€æµç¨‹æ¥ä½“éªŒ `pytest` çš„åŸºç¡€ç”¨æ³•ã€‚

**åœºæ™¯**: æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨æ¨¡å— `calculator.py`ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåŠ æ³•å‡½æ•°ã€‚

**ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºè¦æµ‹è¯•çš„ä»£ç **

åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `calculator.py` çš„æ–‡ä»¶ï¼š

```python
# calculator.py

def add(a: int, b: int) -> int:
    """è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œ"""
    return a + b
```

**ç¬¬äºŒæ­¥ï¼šç¼–å†™æµ‹è¯•ç”¨ä¾‹**

åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `test_calculator.py` çš„æ–‡ä»¶ï¼Œå¹¶ç¼–å†™æµ‹è¯•å‡½æ•°ï¼š

```python
# test_calculator.py
from calculator import add

def test_add_positive_numbers():
    """æµ‹è¯•ä¸¤ä¸ªæ­£æ•°ç›¸åŠ """
    assert add(2, 3) == 5

def test_add_negative_numbers():
    """æµ‹è¯•ä¸¤ä¸ªè´Ÿæ•°ç›¸åŠ """
    assert add(-1, -1) == -2

def test_add_positive_and_negative():
    """æµ‹è¯•ä¸€æ­£ä¸€è´Ÿç›¸åŠ """
    assert add(5, -3) == 2

# è®©æˆ‘ä»¬æ•…æ„å†™ä¸€ä¸ªä¼šå¤±è´¥çš„æµ‹è¯•ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ
def test_add_fails_intentionally():
    """è¿™æ˜¯ä¸€ä¸ªæ•…æ„å¤±è´¥çš„æµ‹è¯•ï¼Œç”¨äºè§‚å¯ŸæŠ¥å‘Š"""
    assert add(2, 2) == 5 
```

**ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œæµ‹è¯•å¹¶è§£è¯»æŠ¥å‘Š**

æ‰“å¼€ç»ˆç«¯ï¼Œç¡®ä¿ä½ åœ¨é¡¹ç›®æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹ï¼Œç„¶åè¿è¡Œ `pytest`ï¼š

```bash
pytest
```

**æˆåŠŸä¸å¤±è´¥çš„æŠ¥å‘Šè§£è¯»:**

`pytest` ä¼šè¾“å‡ºéå¸¸æ¸…æ™°çš„æŠ¥å‘Šã€‚

*   **æˆåŠŸçš„æµ‹è¯•** ä¼šç”¨ä¸€ä¸ªç»¿è‰²çš„ `.` è¡¨ç¤ºã€‚
*   **å¤±è´¥çš„æµ‹è¯•** ä¼šç”¨ä¸€ä¸ªçº¢è‰²çš„ `F` è¡¨ç¤ºã€‚

ä½ å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š

```
============================= test session starts ==============================
...
collected 4 items

test_calculator.py ...F                                                  [100%]

=================================== FAILURES ===================================
________________________ test_add_fails_intentionally ________________________

    def test_add_fails_intentionally():
        """è¿™æ˜¯ä¸€ä¸ªæ•…æ„å¤±è´¥çš„æµ‹è¯•ï¼Œç”¨äºè§‚å¯ŸæŠ¥å‘Š"""
>       assert add(2, 2) == 5
E       assert 4 == 5
E        +  where 4 = add(2, 2)

test_calculator.py:18: AssertionError
=========================== short test summary info ============================
FAILED test_calculator.py::test_add_fails_intentionally - assert 4 == 5
========================= 1 failed, 3 passed in 0.01s ==========================
```

**æŠ¥å‘Šè§£è¯»**:
*   `collected 4 items`: `pytest` å‘ç°äº† 4 ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚
*   `...F`: å‰ 3 ä¸ªé€šè¿‡ (`.`)ï¼Œç¬¬ 4 ä¸ªå¤±è´¥ (`F`)ã€‚
*   **FAILURES** éƒ¨åˆ†:
    *   æ˜ç¡®æŒ‡å‡ºäº†å“ªä¸ªæ–‡ä»¶ (`test_calculator.py`) å’Œå“ªä¸ªå‡½æ•° (`test_add_fails_intentionally`) å¤±è´¥äº†ã€‚
    *   `> assert add(2, 2) == 5`: æ˜¾ç¤ºäº†å¤±è´¥çš„æ–­è¨€ä»£ç è¡Œã€‚
    *   `E assert 4 == 5`: **è¿™æ˜¯ `pytest` çš„å¼ºå¤§ä¹‹å¤„**ã€‚å®ƒæ™ºèƒ½åœ°å±•ç¤ºäº† `assert` å·¦è¾¹çš„è¡¨è¾¾å¼ (`add(2, 2)`) çš„å®é™…è®¡ç®—ç»“æœæ˜¯ `4`ï¼Œè€Œä½ æœŸæœ›çš„æ˜¯ `5`ã€‚è¿™ä½¿å¾—è°ƒè¯•å˜å¾—å¼‚å¸¸ç®€å•ã€‚
*   `1 failed, 3 passed`: æœ€åçš„æ€»ç»“ä¿¡æ¯ã€‚

### ğŸ§  æ·±åº¦è§£æ (In-depth Analysis)

**1. ä¸ºä»€ä¹ˆé€‰æ‹© `pytest` è€Œä¸æ˜¯ `assert` æ‰‹åŠ¨è°ƒè¯•ï¼Ÿ**

è™½ç„¶ä½ å¯ä»¥æ‰‹åŠ¨åœ¨ä»£ç é‡Œå†™ `print` å’Œ `assert` æ¥è°ƒè¯•ï¼Œä½† `pytest` å°†å…¶ç³»ç»ŸåŒ–ã€è‡ªåŠ¨åŒ–ï¼Œå¹¶å¸¦æ¥äº†å·¨å¤§ä¼˜åŠ¿ï¼š
*   **è‡ªåŠ¨åŒ–**: ä¸€æ¡å‘½ä»¤è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œæ¯ä¸ªè„šæœ¬ã€‚
*   **å¯é‡å¤æ€§**: ç¡®ä¿ä»£ç ä¿®æ”¹åï¼Œæ—§çš„åŠŸèƒ½æ²¡æœ‰è¢«ç ´åï¼ˆè¿™è¢«ç§°ä¸ºâ€œå›å½’æµ‹è¯•â€ï¼‰ã€‚
*   **æ¸…æ™°çš„æŠ¥å‘Š**: å¤±è´¥æ—¶æä¾›ç²¾ç¡®çš„ä¸Šä¸‹æ–‡ï¼Œè¿œèƒœäºä¸€ä¸ªç®€å•çš„ `AssertionError`ã€‚
*   **ä»£ç åˆ†ç¦»**: æµ‹è¯•ä»£ç ä¸ä¸šåŠ¡é€»è¾‘ä»£ç åˆ†ç¦»ï¼Œä¿æŒé¡¹ç›®æ•´æ´ã€‚

**2. æµ‹è¯•é©±åŠ¨å¼€å‘ (Test-Driven Development, TDD) çš„åŸºæœ¬æ€æƒ³**

`pytest` æ˜¯å®è·µ TDD çš„ç»ä½³å·¥å…·ã€‚TDD æ˜¯ä¸€ç§é¢ è¦†ä¼ ç»Ÿå¼€å‘æµç¨‹çš„æ€æƒ³ï¼š**å…ˆå†™æµ‹è¯•ï¼Œå†å†™å®ç°ä»£ç **ã€‚å®ƒéµå¾ªä¸€ä¸ªç®€å•çš„â€œçº¢-ç»¿-é‡æ„â€å¾ªç¯ã€‚

```mermaid
graph TD
    A(ğŸ”´ Red: å†™ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•) --> B(ğŸŸ¢ Green: å†™æœ€ç®€å•çš„ä»£ç è®©æµ‹è¯•é€šè¿‡)
    B --> C(ğŸ”µ Refactor: é‡æ„ä»£ç ï¼Œä¿æŒæµ‹è¯•é€šè¿‡)
    C --> A
```

*   **Red (çº¢)**: é¦–å…ˆï¼Œä¸ºå³å°†å¼€å‘çš„æ–°åŠŸèƒ½ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚å› ä¸ºåŠŸèƒ½è¿˜æ²¡å®ç°ï¼Œæ‰€ä»¥è¿è¡Œæµ‹è¯•å¿…ç„¶ä¼šå¤±è´¥ï¼ŒæŠ¥å‘Šæ˜¯çº¢è‰²çš„ã€‚
*   **Green (ç»¿)**: æ¥ä¸‹æ¥ï¼Œç¼–å†™æœ€å°‘çš„ã€æœ€ç›´æ¥çš„ä»£ç ï¼Œä»…ä»…ä¸ºäº†è®©è¿™ä¸ªåˆšåˆšå¤±è´¥çš„æµ‹è¯•é€šè¿‡ã€‚æ­¤æ—¶å†è¿è¡Œæµ‹è¯•ï¼ŒæŠ¥å‘Šå˜ä¸ºç»¿è‰²ã€‚
*   **Refactor (é‡æ„)**: ç°åœ¨æµ‹è¯•å·²ç»é€šè¿‡ï¼Œä½ å¯ä»¥å®‰å¿ƒåœ°é‡æ„ã€ä¼˜åŒ–ä»£ç ç»“æ„ï¼Œä¸å¿…æ‹…å¿ƒä¼šç ´ååŠŸèƒ½ï¼Œå› ä¸ºæµ‹è¯•ä¼šæ—¶åˆ»ä¿æŠ¤ä½ ã€‚åªè¦é‡æ„åæ‰€æœ‰æµ‹è¯•ä¾ç„¶æ˜¯ç»¿è‰²çš„ï¼Œå°±è¯æ˜é‡æ„æ˜¯å®‰å…¨çš„ã€‚

TDD å¹¶éåªæ˜¯æµ‹è¯•ï¼Œå®ƒæ˜¯ä¸€ç§é©±åŠ¨ä»£ç è®¾è®¡å’Œä¿è¯è´¨é‡çš„å¼€å‘æ–¹æ³•è®ºã€‚å®ƒèƒ½è®©ä½ åœ¨ç¼–ç å‰æ€è€ƒæ¸…æ¥šå‡½æ•°çš„åŠŸèƒ½ã€è¾“å…¥å’Œé¢„æœŸè¾“å‡ºï¼Œä»è€Œå†™å‡ºæ›´æ¸…æ™°ã€æ›´å¯é çš„ä»£ç ã€‚

### âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ (Common Pitfalls & Best Practices)

1.  **é™·é˜±ï¼šå‘½åä¸è§„èŒƒå¯¼è‡´æµ‹è¯•æœªè¢«æ‰§è¡Œ**
    *   **é—®é¢˜**: æ–°æ‰‹æœ€å¸¸çŠ¯çš„é”™è¯¯æ˜¯æµ‹è¯•æ–‡ä»¶æˆ–å‡½æ•°å‘½åä¸ç¬¦åˆ `pytest` çš„çº¦å®šï¼ˆå¦‚ `my_test.py` å†™æˆäº† `mytest.py`ï¼Œ`def test_add` å†™æˆäº† `def add_test`ï¼‰ã€‚è¿™ä¼šå¯¼è‡´ `pytest` å®‰é™åœ°è·³è¿‡ä½ çš„æµ‹è¯•ï¼Œç»™ä½ ä¸€ç§â€œæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡â€çš„å‡è±¡ã€‚
    *   **å®è·µ**: ä¸¥æ ¼éµå®ˆ `test_*.py` / `*_test.py` å’Œ `test_*` çš„å‘½åè§„åˆ™ã€‚è¿è¡Œ `pytest -v` æ—¶ï¼Œæ³¨æ„çœ‹ `collected X items`ï¼Œç¡®è®¤ `X` çš„æ•°é‡æ˜¯å¦ä¸ä½ ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹æ•°é‡ä¸€è‡´ã€‚

2.  **é™·é˜±ï¼šæµ‹è¯•ç”¨ä¾‹ä¹‹é—´å­˜åœ¨ä¾èµ–**
    *   **é—®é¢˜**: ä¸€ä¸ªæµ‹è¯•çš„æˆåŠŸä¾èµ–äºå¦ä¸€ä¸ªæµ‹è¯•å…ˆæ‰§è¡Œå¹¶ä¿®æ”¹äº†æŸä¸ªå…¨å±€çŠ¶æ€ã€‚è¿™æ˜¯éå¸¸å±é™©çš„ï¼Œå› ä¸º `pytest` ä¸ä¿è¯æµ‹è¯•çš„æ‰§è¡Œé¡ºåºã€‚
    *   **å®è·µ**: **ä¿æŒæµ‹è¯•çš„ç‹¬ç«‹æ€§ (Isolation)**ã€‚æ¯ä¸ªæµ‹è¯•å‡½æ•°éƒ½åº”è¯¥èƒ½ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–äºå…¶ä»–æµ‹è¯•ã€‚æµ‹è¯•æ‰€éœ€çš„æ•°æ®å’ŒçŠ¶æ€åº”è¯¥åœ¨æµ‹è¯•å‡½æ•°å†…éƒ¨åˆ›å»ºã€‚

3.  **æœ€ä½³å®è·µï¼šæµ‹è¯•å‘½åè¦æ¸…æ™°è¾¾æ„**
    *   ä¸€ä¸ªå¥½çš„æµ‹è¯•å‡½æ•°ååº”è¯¥èƒ½æ¸…æ™°åœ°æè¿°å®ƒåœ¨æµ‹è¯•ä»€ä¹ˆåœºæ™¯ã€‚
    *   **ä¸å¥½**: `def test_1():`
    *   **å¥½**: `def test_add_function_with_two_positive_integers():`

4.  **æœ€ä½³å®è·µï¼šä¸€ä¸ªæµ‹è¯•åªåšä¸€ä»¶äº‹**
    *   ä¸€ä¸ªæµ‹è¯•å‡½æ•°åº”è¯¥åªéªŒè¯ä¸€ä¸ªå…·ä½“çš„è¡Œä¸ºæˆ–é€»è¾‘ç‚¹ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦æµ‹è¯•å¤šç§åœºæ™¯ï¼ˆå¦‚æ­£å¸¸è¾“å…¥ã€è¾¹ç•Œå€¼ã€å¼‚å¸¸è¾“å…¥ï¼‰ï¼Œåº”è¯¥ä¸ºæ¯ä¸ªåœºæ™¯ç¼–å†™ç‹¬ç«‹çš„æµ‹è¯•å‡½æ•°ã€‚è¿™æ ·å½“æµ‹è¯•å¤±è´¥æ—¶ï¼Œä½ èƒ½ç«‹åˆ»å®šä½åˆ°æ˜¯å“ªä¸ªåœºæ™¯å‡ºäº†é—®é¢˜ã€‚

### ğŸš€ å®æˆ˜æ¼”ç»ƒ (Practical Exercise)

**æ¡ˆä¾‹ç ”ç©¶ï¼šç¼–å†™ä¸€ä¸ªç®€å•çš„é‚®ä»¶åœ°å€éªŒè¯å‡½æ•°åŠå…¶æµ‹è¯•**

å‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•° `is_valid_email` æ¥æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯åˆæ³•çš„ç”µå­é‚®ä»¶æ ¼å¼ã€‚

**1. ä»»åŠ¡ç›®æ ‡**
ä¸ºä¸‹é¢çš„ `validators.py` æ–‡ä»¶ç¼–å†™ä¸€å¥—å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–å¤šç§åœºæ™¯ã€‚

**2. å¾…æµ‹è¯•çš„ä»£ç **
åˆ›å»ºä¸€ä¸ª `validators.py` æ–‡ä»¶ï¼š

```python
# validators.py
import re

def is_valid_email(email: str) -> bool:
    """
    ä¸€ä¸ªéå¸¸åŸºç¡€çš„é‚®ä»¶æ ¼å¼éªŒè¯å™¨ã€‚
    - å¿…é¡»åŒ…å«ä¸€ä¸ª '@' ç¬¦å·ã€‚
    - '@' ç¬¦å·åå¿…é¡»æœ‰ç‚¹ '.'ã€‚
    - '@' ç¬¦å·ä¸èƒ½æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚
    - '.' ç¬¦å·ä¸èƒ½æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ã€‚
    """
    if not isinstance(email, str):
        return False
    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¼šæ›´å¥å£®ï¼Œä½†è¿™é‡Œä¸ºäº†æ•™å­¦ç›®çš„ï¼Œä½¿ç”¨ç®€å•é€»è¾‘
    if email.count('@') != 1:
        return False
    if email.startswith('@') or email.endswith('.'):
        return False
    
    local_part, domain_part = email.split('@')
    if '.' not in domain_part:
        return False

    return True
```

**3. ä½ çš„ä»»åŠ¡**
åˆ›å»º `test_validators.py` æ–‡ä»¶ï¼Œå¹¶æ€è€ƒéœ€è¦æµ‹è¯•å“ªäº›æƒ…å†µï¼Ÿè‡³å°‘åº”åŒ…æ‹¬ï¼š
*   ä¸€ä¸ªå®Œå…¨åˆæ³•çš„é‚®ä»¶åœ°å€ã€‚
*   ä¸€ä¸ªæ²¡æœ‰ `@` çš„å­—ç¬¦ä¸²ã€‚
*   ä¸€ä¸ªæ²¡æœ‰ `.` åœ¨åŸŸåéƒ¨åˆ†çš„å­—ç¬¦ä¸²ã€‚
*   ä¸€ä¸ªä»¥ `@` å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚
*   ä¸€ä¸ªéå­—ç¬¦ä¸²ç±»å‹çš„è¾“å…¥ã€‚

**4. å‚è€ƒè§£ç­”**

```python
# test_validators.py
from validators import is_valid_email

def test_valid_email():
    """æµ‹è¯•ä¸€ä¸ªæ ‡å‡†çš„ã€åˆæ³•çš„é‚®ä»¶åœ°å€"""
    assert is_valid_email("test.user@example.com") is True

def test_missing_at_symbol():
    """æµ‹è¯•ç¼ºå°‘ @ ç¬¦å·çš„åœºæ™¯"""
    assert is_valid_email("test.userexample.com") is False

def test_missing_dot_in_domain():
    """æµ‹è¯•åŸŸåéƒ¨åˆ†ç¼ºå°‘ . çš„åœºæ™¯"""
    assert is_valid_email("test@examplecom") is False

def test_email_starts_with_at():
    """æµ‹è¯•ä»¥ @ å¼€å¤´çš„åœºæ™¯"""
    assert is_valid_email("@example.com") is False
    
def test_domain_ends_with_dot():
    """æµ‹è¯•ä»¥ . ç»“å°¾çš„åœºæ™¯"""
    assert is_valid_email("test@example.com.") is False

def test_multiple_at_symbols():
    """æµ‹è¯•åŒ…å«å¤šä¸ª @ çš„åœºæ™¯"""
    assert is_valid_email("test@user@example.com") is False

def test_non_string_input():
    """æµ‹è¯•è¾“å…¥ä¸ºéå­—ç¬¦ä¸²ï¼ˆå¦‚æ•´æ•°ï¼‰çš„åœºæ™¯"""
    assert is_valid_email(12345) is False
    
def test_none_input():
    """æµ‹è¯•è¾“å…¥ä¸º None çš„åœºæ™¯"""
    assert is_valid_email(None) is False
```

ç°åœ¨ï¼Œåœ¨ä½ çš„ç»ˆç«¯è¿è¡Œ `pytest`ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æ‰€æœ‰ 8 ä¸ªæµ‹è¯•éƒ½é€šè¿‡äº†ï¼è¿™å¥—æµ‹è¯•å°±æˆä¸ºäº† `is_valid_email` å‡½æ•°è¡Œä¸ºçš„â€œå®‰å…¨ç½‘â€ã€‚

### ğŸ’¡ æ€»ç»“ (Summary)

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»é›¶å¼€å§‹ï¼Œè¸å…¥äº† `pytest` å•å…ƒæµ‹è¯•çš„ä¸–ç•Œã€‚ä½ å·²ç»æŒæ¡äº†ä¿éšœä»£ç è´¨é‡çš„æ ¸å¿ƒæ­¦å™¨ã€‚

**å…³é”®å›é¡¾**:
*   **æµ‹è¯•çš„é‡è¦æ€§**: å®ƒæ˜¯ä»£ç è´¨é‡çš„å®ˆæŠ¤è€…ï¼Œæ˜¯å®‰å…¨é‡æ„çš„åŸºçŸ³ï¼Œä¹Ÿæ˜¯æœ€å¥½çš„æ–‡æ¡£ä¹‹ä¸€ã€‚
*   **`pytest` æ ¸å¿ƒå·¥ä½œæµ**:
    1.  `pip install pytest`
    2.  åˆ›å»º `test_*.py` æµ‹è¯•æ–‡ä»¶ã€‚
    3.  ç¼–å†™ `test_*` æµ‹è¯•å‡½æ•°ã€‚
    4.  åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ `assert` è¿›è¡Œæ–­è¨€ã€‚
    5.  åœ¨ç»ˆç«¯è¿è¡Œ `pytest` å‘½ä»¤ã€‚
*   **TDD æ€æƒ³**: â€œçº¢-ç»¿-é‡æ„â€çš„å¾ªç¯æ˜¯ä¸€ç§å¼ºå¤§çš„å¼€å‘æ¨¡å¼ï¼Œå®ƒé¼“åŠ±ä½ é¢å‘æ¥å£è€Œéå®ç°æ¥ç¼–ç¨‹ã€‚
*   **æ ¸å¿ƒåŸåˆ™**: ä¿æŒæµ‹è¯•çš„**ç‹¬ç«‹ã€å°å·§ã€å‘½åæ¸…æ™°**ï¼Œæ˜¯ç¼–å†™é«˜è´¨é‡æµ‹è¯•çš„å…³é”®ã€‚

ä½ ç°åœ¨å…·å¤‡äº†ä¸ºä»»ä½• Python å‡½æ•°ç¼–å†™åŸºç¡€æµ‹è¯•çš„èƒ½åŠ›ã€‚éšç€ä½ åœ¨æŠ€èƒ½é‡‘å­—å¡”ä¸Šç»§ç»­æ”€ç™»ï¼Œæˆ‘ä»¬è¿˜ä¼šå­¦ä¹  `pytest` æ›´é«˜çº§çš„ç‰¹æ€§ï¼Œå¦‚ Fixturesï¼ˆæµ‹è¯•å¤¹å…·ï¼‰ã€å‚æ•°åŒ–æµ‹è¯•ã€Mockingï¼ˆæ¨¡æ‹Ÿï¼‰ç­‰ï¼Œå®ƒä»¬å°†è®©ä½ çš„æµ‹è¯•èƒ½åŠ›å˜å¾—æ›´åŠ å¼ºå¤§å’Œé«˜æ•ˆã€‚