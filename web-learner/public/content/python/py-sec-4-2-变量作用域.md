å¥½çš„ï¼Œæ€»å»ºç­‘å¸ˆã€‚æ¥ç»­ä¸Šä¸€èŠ‚â€œå‡½æ•°çš„å®šä¹‰ä¸è°ƒç”¨â€ï¼Œæˆ‘å°†ä¸ºæ‚¨ç²¾å¿ƒæ‰“é€ å…³äºâ€œå˜é‡ä½œç”¨åŸŸâ€çš„æ•™ç¨‹ã€‚æœ¬èŠ‚å°†æ·±å…¥æ¢è®¨å˜é‡åœ¨ Python ç¨‹åºä¸­çš„â€œç®¡è¾–èŒƒå›´â€ï¼Œæ­ç¤º LEGB è§„åˆ™çš„å¥¥ç§˜ã€‚

---

### ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ
å˜é‡ä½œç”¨åŸŸï¼ˆScopeï¼‰å®šä¹‰äº†ä¸€ä¸ªå˜é‡èƒ½å¤Ÿè¢«è®¿é—®çš„â€œå¯è§èŒƒå›´â€ï¼Œå®ƒå°±åƒæ˜¯å˜é‡çš„â€œå›½ç±â€å’Œâ€œæ´»åŠ¨åŒºåŸŸâ€ï¼Œå†³å®šäº†ä½ åœ¨ä»£ç çš„å“ªä¸ªä½ç½®å¯ä»¥â€œçœ‹åˆ°â€å¹¶ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä»è€Œé¿å…äº†å‘½åå†²çªï¼Œè®©ç¨‹åºæ›´åŠ æ¨¡å—åŒ–å’Œå®‰å…¨ã€‚

### ğŸ’¡ ä½¿ç”¨æ–¹å¼
Python éµå¾ª **LEGB** è§„åˆ™æ¥æŸ¥æ‰¾ä¸€ä¸ªå˜é‡ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§ä»é«˜åˆ°ä½çš„æŸ¥æ‰¾é¡ºåºï¼š

1.  **L (Local)**: **å±€éƒ¨ä½œç”¨åŸŸ**ï¼ŒæŒ‡å½“å‰å‡½æ•°æˆ–ç±»çš„å†…éƒ¨ã€‚è¿™æ˜¯æŸ¥æ‰¾çš„ç¬¬ä¸€ç«™ã€‚
2.  **E (Enclosing)**: **é—­åŒ…ä½œç”¨åŸŸ**ï¼ŒæŒ‡åœ¨åµŒå¥—å‡½æ•°ä¸­ï¼Œå¤–éƒ¨å‡½æ•°ï¼ˆéå…¨å±€ï¼‰çš„ä½œç”¨åŸŸã€‚
3.  **G (Global)**: **å…¨å±€ä½œç”¨åŸŸ**ï¼ŒæŒ‡åœ¨æ¨¡å—ï¼ˆ`.py` æ–‡ä»¶ï¼‰çš„é¡¶å±‚å®šä¹‰çš„å˜é‡ã€‚
4.  **B (Built-in)**: **å†…ç½®ä½œç”¨åŸŸ**ï¼ŒæŒ‡ Python è§£é‡Šå™¨å¯åŠ¨æ—¶å°±åŠ è½½çš„å†…ç½®åç§°ï¼Œå¦‚ `print()`, `len()`, `str` ç­‰ã€‚

è§£é‡Šå™¨ä¼šåƒç©å¯»å®æ¸¸æˆä¸€æ ·ï¼Œä» L å¼€å§‹é€å±‚å‘å¤–å¯»æ‰¾ï¼Œä¸€æ—¦æ‰¾åˆ°å°±ä¸ä¼šå†ç»§ç»­ã€‚å¦‚æœæ‰¾åˆ° B å±‚è¿˜æ²¡æ‰¾åˆ°ï¼Œå°±ä¼šæŠ›å‡º `NameError`ã€‚

è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºï¼š

```mermaid
graph TD
    subgraph Pythonè§£é‡Šå™¨çš„æŸ¥æ‰¾ä¹‹æ—…
        direction LR
        A(å¼€å§‹æŸ¥æ‰¾å˜é‡) --> L{"åœ¨å±€éƒ¨(Local)ä½œç”¨åŸŸ?"}
        L -->|âœ”ï¸ æ‰¾åˆ°| Z(ä½¿ç”¨è¯¥å˜é‡)
        L -->|âŒ æœªæ‰¾åˆ°| E{"åœ¨é—­åŒ…(Enclosing)ä½œç”¨åŸŸ?"}
        E -->|âœ”ï¸ æ‰¾åˆ°| Z
        E -->|âŒ æœªæ‰¾åˆ°| G{"åœ¨å…¨å±€(Global)ä½œç”¨åŸŸ?"}
        G -->|âœ”ï¸ æ‰¾åˆ°| Z
        G -->|âŒ æœªæ‰¾åˆ°| B{"åœ¨å†…ç½®(Built-in)ä½œç”¨åŸŸ?"}
        B -->|âœ”ï¸ æ‰¾åˆ°| Z
        B -->|âŒ æœªæ‰¾åˆ°| Error((æŠ›å‡º NameError å¼‚å¸¸!))
    end
```

### ğŸ“š Level 1: åŸºç¡€è®¤çŸ¥ï¼ˆ30ç§’ç†è§£ï¼‰
æœ€å¸¸è§çš„å°±æ˜¯å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°å†…ï¼‰å’Œå…¨å±€ä½œç”¨åŸŸï¼ˆå‡½æ•°å¤–ï¼‰ã€‚å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¤–é¢æ˜¯çœ‹ä¸åˆ°çš„ã€‚

```python
# G (Global): è¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨æ–‡ä»¶çš„ä»»ä½•åœ°æ–¹éƒ½å¯è§
player_level = 10 

def enter_dungeon():
    # L (Local): è¿™æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåªåœ¨ enter_dungeon å‡½æ•°å†…éƒ¨æœ‰æ•ˆ
    dungeon_name = "å“€åšæ´ç©´"
    print(f"ç©å®¶ç­‰çº§ {player_level}ï¼Œè¿›å…¥äº†å±€éƒ¨åœ°å›¾ï¼š{dungeon_name}ã€‚")

# è°ƒç”¨å‡½æ•°
enter_dungeon()

# åœ¨å‡½æ•°å¤–éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®å…¨å±€å˜é‡ player_level
print(f"åœ¨å‡½æ•°å¤–éƒ¨ï¼Œç©å®¶ç­‰çº§ä¾ç„¶æ˜¯ {player_level}ã€‚")

# ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•åœ¨å¤–éƒ¨è®¿é—®å±€éƒ¨å˜é‡ dungeon_nameï¼Œå°±ä¼šå¤±è´¥
# print(dungeon_name)  # å–æ¶ˆè¿™è¡Œæ³¨é‡Šä¼šå¼•å‘ NameError: name 'dungeon_name' is not defined

# é¢„æœŸè¾“å‡º:
# ç©å®¶ç­‰çº§ 10ï¼Œè¿›å…¥äº†å±€éƒ¨åœ°å›¾ï¼šå“€åšæ´ç©´ã€‚
# åœ¨å‡½æ•°å¤–éƒ¨ï¼Œç©å®¶ç­‰çº§ä¾ç„¶æ˜¯ 10ã€‚
```

### ğŸ“ˆ Level 2: æ ¸å¿ƒç‰¹æ€§ï¼ˆæ·±å…¥ç†è§£ï¼‰
é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°å†…è¯»å–ä¸Šå±‚ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†å¦‚æœä½ æƒ³â€œä¿®æ”¹â€å®ƒä»¬ï¼Œå°±éœ€è¦ç‰¹æ®Šçš„å…³é”®å­—æ¥â€œç”³è¯·æƒé™â€ã€‚

#### ç‰¹æ€§1: ä½¿ç”¨ `global` ä¿®æ”¹å…¨å±€å˜é‡
å¦‚æœä½ åœ¨å‡½æ•°å†…å¯¹ä¸€ä¸ªä¸å…¨å±€å˜é‡åŒåçš„å˜é‡è¿›è¡Œèµ‹å€¼ï¼ŒPython ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚è¦çœŸæ­£ä¿®æ”¹å…¨å±€å˜é‡ï¼Œå¿…é¡»ä½¿ç”¨ `global` å…³é”®å­—å£°æ˜ã€‚

```python
# G (Global): æ¸¸æˆåˆ†æ•°
game_score = 0
print(f"æ¸¸æˆå¼€å§‹ï¼Œåˆå§‹åˆ†æ•°: {game_score}")

def defeat_enemy_simple(points):
    """ä¸€ä¸ªå°è¯•å¢åŠ åˆ†æ•°çš„å‡½æ•°ï¼Œä½†æ²¡æœ‰ä½¿ç”¨ global"""
    # è¿™é‡Œï¼ŒPython åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åŒåå±€éƒ¨å˜é‡ game_score
    game_score = points 
    print(f"å‡½æ•°å†…éƒ¨ï¼ˆå±€éƒ¨å˜é‡ï¼‰çš„åˆ†æ•°å˜ä¸º: {game_score}")

def defeat_enemy_pro(points):
    """ä½¿ç”¨ global å…³é”®å­—æ­£ç¡®åœ°ä¿®æ”¹å…¨å±€åˆ†æ•°"""
    # å‘Šè¯‰ Pythonï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦æ“ä½œçš„æ˜¯å…¨å±€ä½œç”¨åŸŸçš„ game_score
    global game_score
    game_score += points
    print(f"å‡½æ•°å†…éƒ¨ï¼ˆä¿®æ”¹å…¨å±€å˜é‡ï¼‰çš„åˆ†æ•°å˜ä¸º: {game_score}")

# è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°
defeat_enemy_simple(50)
print(f"è°ƒç”¨ simple ç‰ˆåï¼Œå…¨å±€åˆ†æ•°ä¾ç„¶æ˜¯: {game_score}  (æœªè¢«ä¿®æ”¹ï¼)")

# è°ƒç”¨ç¬¬äºŒä¸ªå‡½æ•°
defeat_enemy_pro(100)
print(f"è°ƒç”¨ pro ç‰ˆåï¼Œå…¨å±€åˆ†æ•°æˆåŠŸå˜ä¸º: {game_score}")

# é¢„æœŸè¾“å‡º:
# æ¸¸æˆå¼€å§‹ï¼Œåˆå§‹åˆ†æ•°: 0
# å‡½æ•°å†…éƒ¨ï¼ˆå±€éƒ¨å˜é‡ï¼‰çš„åˆ†æ•°å˜ä¸º: 50
# è°ƒç”¨ simple ç‰ˆåï¼Œå…¨å±€åˆ†æ•°ä¾ç„¶æ˜¯: 0  (æœªè¢«ä¿®æ”¹ï¼)
# å‡½æ•°å†…éƒ¨ï¼ˆä¿®æ”¹å…¨å±€å˜é‡ï¼‰çš„åˆ†æ•°å˜ä¸º: 100
# è°ƒç”¨ pro ç‰ˆåï¼Œå…¨å±€åˆ†æ•°æˆåŠŸå˜ä¸º: 100
```

#### ç‰¹æ€§2: åµŒå¥—å‡½æ•°ä¸ `nonlocal` (é—­åŒ…ä½œç”¨åŸŸ)
å½“å‡½æ•°åµŒå¥—æ—¶ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œè¿™æ„æˆäº†é—­åŒ…ï¼ˆEnclosingï¼‰ä½œç”¨åŸŸã€‚è¦ä¿®æ”¹è¿™ä¸ªé—­åŒ…å˜é‡ï¼Œéœ€è¦ä½¿ç”¨ `nonlocal` å…³é”®å­—ã€‚

```python
def spell_book():
    """è¿™æ˜¯ä¸€ä¸ªæ³•æœ¯ä¹¦ï¼Œè®°å½•äº†æ³•åŠ›å€¼ã€‚"""
    # E (Enclosing): é—­åŒ…ä½œç”¨åŸŸå˜é‡
    mana = 100
    
    def cast_fireball():
        """æ–½æ”¾ç«çƒæœ¯ï¼Œä¼šæ¶ˆè€—æ³•åŠ›ã€‚"""
        # å£°æ˜ mana ä¸æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œæ˜¯æ¥è‡ªä¸Šä¸€å±‚ï¼ˆé—­åŒ…ï¼‰ä½œç”¨åŸŸ
        nonlocal mana
        cost = 30
        
        if mana >= cost:
            mana -= cost
            print(f"ğŸ”¥ æ–½æ”¾ç«çƒæœ¯æˆåŠŸï¼æ¶ˆè€— {cost} æ³•åŠ›ï¼Œå‰©ä½™ {mana}ã€‚")
        else:
            print(f"æ³•åŠ›ä¸è¶³ï¼å‰©ä½™ {mana}ï¼Œæ— æ³•æ–½æ”¾ç«çƒæœ¯ã€‚")

    # è¿”å›çš„æ˜¯å†…éƒ¨å‡½æ•°æœ¬èº«
    return cast_fireball

# æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªâ€œç»‘å®šäº†æ³•åŠ›å€¼â€çš„æ³•æœ¯
my_spell = spell_book()

# è¿ç»­æ–½æ³•ï¼Œå¯ä»¥çœ‹åˆ° mana çš„çŠ¶æ€è¢«â€œè®°ä½â€äº†
my_spell()
my_spell()
my_spell()
my_spell() # ç¬¬å››æ¬¡æ–½æ³•æ—¶æ³•åŠ›ä¸è¶³

# é¢„æœŸè¾“å‡º:
# ğŸ”¥ æ–½æ”¾ç«çƒæœ¯æˆåŠŸï¼æ¶ˆè€— 30 æ³•åŠ›ï¼Œå‰©ä½™ 70ã€‚
# ğŸ”¥ æ–½æ”¾ç«çƒæœ¯æˆåŠŸï¼æ¶ˆè€— 30 æ³•åŠ›ï¼Œå‰©ä½™ 40ã€‚
# ğŸ”¥ æ–½æ”¾ç«çƒæœ¯æˆåŠŸï¼æ¶ˆè€— 30 æ³•åŠ›ï¼Œå‰©ä½™ 10ã€‚
# æ³•åŠ›ä¸è¶³ï¼å‰©ä½™ 10ï¼Œæ— æ³•æ–½æ”¾ç«çƒæœ¯ã€‚
```

### ğŸ” Level 3: å¯¹æ¯”å­¦ä¹ ï¼ˆé¿å…é™·é˜±ï¼‰
ä¸€ä¸ªä¸ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç´§å¯†ç›¸å…³çš„ç»å…¸é™·é˜±æ˜¯ï¼š**ä½¿ç”¨å¯å˜ç±»å‹ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ï¼‰ä½œä¸ºå‡½æ•°çš„é»˜è®¤å‚æ•°**ã€‚

**è§„åˆ™ï¼š** å‡½æ•°çš„é»˜è®¤å‚æ•°å€¼åœ¨å‡½æ•°å®šä¹‰æ—¶åªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œå¹¶åœ¨åç»­æ‰€æœ‰è°ƒç”¨ä¸­å…±äº«ã€‚

```python
# === é”™è¯¯ç”¨æ³• ===
# âŒ é»˜è®¤å‚æ•°æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ (list)
def add_quest_item(item, inventory=[]):
    """
    è¿™ä¸ªå‡½æ•°çš„é»˜è®¤å‚æ•° inventory åªåœ¨å®šä¹‰æ—¶åˆ›å»ºä¸€æ¬¡ã€‚
    ä¹‹åæ‰€æœ‰çš„è°ƒç”¨éƒ½å…±äº«è¿™åŒä¸€ä¸ªåˆ—è¡¨ï¼
    """
    inventory.append(item)
    print(f"æ·»åŠ  '{item}' åï¼Œä½ çš„ä»»åŠ¡èƒŒåŒ…é‡Œæœ‰: {inventory}")

print("--- é”™è¯¯çš„ç”¨æ³• ---")
add_quest_item("é¾™é³")          # ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œçœ‹èµ·æ¥æ­£å¸¸
add_quest_item("ç‹®é¹«ç¾½æ¯›")      # ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œ"é¾™é³"ç«Ÿç„¶è¿˜åœ¨ï¼
# è§£é‡Šï¼š
# ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œé»˜è®¤çš„ç©ºåˆ—è¡¨ inventory è¢«ä¿®æ”¹ï¼ŒåŠ å…¥äº†"é¾™é³"ã€‚
# ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œç”±äºæ²¡æœ‰æä¾›æ–°çš„åˆ—è¡¨ï¼Œå‡½æ•°ç»§ç»­ä½¿ç”¨é‚£ä¸ªå·²ç»è¢«ä¿®æ”¹è¿‡çš„é»˜è®¤åˆ—è¡¨ï¼Œ
# å¯¼è‡´"ç‹®é¹«ç¾½æ¯›"è¢«æ·»åŠ åˆ°äº†å«æœ‰"é¾™é³"çš„åˆ—è¡¨åé¢ï¼Œå¼•å‘äº†æ„å¤–çš„å…±äº«çŠ¶æ€ã€‚


# === æ­£ç¡®ç”¨æ³• ===
# âœ… ä½¿ç”¨ None ä½œä¸ºå“¨å…µå€¼ï¼Œåœ¨å‡½æ•°ä½“å†…åˆ›å»ºæ–°å¯¹è±¡
def add_quest_item_safe(item, inventory=None):
    """
    è¿™æ˜¯ä¸€ç§æ›´å®‰å…¨ã€æ›´ç¬¦åˆç›´è§‰çš„å†™æ³•ã€‚
    """
    if inventory is None:
        # ä»…å½“è°ƒç”¨è€…æœªæä¾› inventory æ—¶ï¼Œæ‰åœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„åˆ—è¡¨
        inventory = []
    inventory.append(item)
    print(f"æ·»åŠ  '{item}' åï¼Œä½ çš„ä»»åŠ¡èƒŒåŒ…é‡Œæœ‰: {inventory}")

print("\n--- æ­£ç¡®çš„ç”¨æ³• ---")
add_quest_item_safe("é¾™é³")
add_quest_item_safe("ç‹®é¹«ç¾½æ¯›") # è¿™æ¬¡ç»“æœç¬¦åˆé¢„æœŸï¼Œä¸¤ä¸ªèƒŒåŒ…æ˜¯ç‹¬ç«‹çš„

# é¢„æœŸè¾“å‡º:
# --- é”™è¯¯çš„ç”¨æ³• ---
# æ·»åŠ  'é¾™é³' åï¼Œä½ çš„ä»»åŠ¡èƒŒåŒ…é‡Œæœ‰: ['é¾™é³']
# æ·»åŠ  'ç‹®é¹«ç¾½æ¯›' åï¼Œä½ çš„ä»»åŠ¡èƒŒåŒ…é‡Œæœ‰: ['é¾™é³', 'ç‹®é¹«ç¾½æ¯›']
#
# --- æ­£ç¡®çš„ç”¨æ³• ---
# æ·»åŠ  'é¾™é³' åï¼Œä½ çš„ä»»åŠ¡èƒŒåŒ…é‡Œæœ‰: ['é¾™é³']
# æ·»åŠ  'ç‹®é¹«ç¾½æ¯›' åï¼Œä½ çš„ä»»åŠ¡èƒŒåŒ…é‡Œæœ‰: ['ç‹®é¹«ç¾½æ¯›']
```

### ğŸš€ Level 4: å®æˆ˜åº”ç”¨ï¼ˆçœŸå®åœºæ™¯ï¼‰

**åœºæ™¯ï¼š** ğŸ¤– AI æœºå™¨äººçŠ¶æ€ç®¡ç†ç³»ç»Ÿ

æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªç®¡ç†æœºå™¨äººèƒ½é‡å’Œä»»åŠ¡çŠ¶æ€çš„ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿå°†ç»¼åˆè¿ç”¨å…¨å±€ã€é—­åŒ…å’Œå±€éƒ¨ä½œç”¨åŸŸã€‚

```python
import time
import random

# --- å…¨å±€ä½œç”¨åŸŸ (Global) ---
# æœºå™¨äººçš„å…¨å±€å”¯ä¸€IDå’Œæ€»å¼€å…³çŠ¶æ€
robot_id = "Alpha-007"
is_system_active = True

def mission_control(mission_name, task_count):
    """
    åˆ›å»ºä¸€ä¸ªä»»åŠ¡æ§åˆ¶å™¨ï¼Œå®ƒæœ‰è‡ªå·±çš„èƒ½é‡å‚¨å¤‡ã€‚
    """
    # --- é—­åŒ…ä½œç”¨åŸŸ (Enclosing) ---
    mission_energy = 100.0
    tasks_completed = 0
    print(f"\n[ä»»åŠ¡æ§åˆ¶å™¨] {mission_name} å·²å¯åŠ¨ï¼Œèƒ½é‡: {mission_energy}ï¼Œå¾…åŠä»»åŠ¡: {task_count}ã€‚")

    def execute_task():
        """
        æ‰§è¡Œå•ä¸ªä»»åŠ¡ï¼Œä¼šå½±å“é—­åŒ…å’Œå…¨å±€çŠ¶æ€ã€‚
        """
        nonlocal mission_energy, tasks_completed
        global is_system_active

        if not is_system_active:
            print("ğŸš¨ ç³»ç»Ÿæ€»å¼€å…³å·²å…³é—­ï¼Œæ— æ³•æ‰§è¡Œä»»åŠ¡ï¼")
            return

        if tasks_completed >= task_count:
            print(f"âœ… {mission_name} æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼")
            return

        # --- å±€éƒ¨ä½œç”¨åŸŸ (Local) ---
        energy_cost = random.uniform(15.5, 25.0)

        if mission_energy >= energy_cost:
            print(f"æ­£åœ¨æ‰§è¡Œä»»åŠ¡... (è€—èƒ½: {energy_cost:.1f})")
            time.sleep(0.5) # æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œ
            mission_energy -= energy_cost
            tasks_completed += 1
            print(f"ä»»åŠ¡å®Œæˆï¼[å‰©ä½™èƒ½é‡: {mission_energy:.1f}] [å·²å®Œæˆ: {tasks_completed}/{task_count}]")
        else:
            print(f"èƒ½é‡ä¸è¶³ï¼éœ€è¦ {energy_cost:.1f}ï¼Œå‰©ä½™ {mission_energy:.1f}ã€‚ä»»åŠ¡å¤±è´¥ï¼")
            is_system_active = False # èƒ½é‡è€—å°½ï¼Œå…³é—­å…¨å±€å¼€å…³
            print("ç³»ç»Ÿèƒ½é‡è€—å°½ï¼Œå…¨å±€ç³»ç»Ÿå·²ç´§æ€¥å…³é—­ã€‚")

    return execute_task

# --- æ¨¡æ‹Ÿå¼€å§‹ ---
print(f"å¯åŠ¨æœºå™¨äºº {robot_id}...")

# åˆ›å»ºä¸€ä¸ªâ€œç«æ˜Ÿæ¢æµ‹â€ä»»åŠ¡æ§åˆ¶å™¨ï¼ŒåŒ…å«3ä¸ªä»»åŠ¡
mars_mission = mission_control("ç«æ˜Ÿåœ°è¡¨æ‰«æ", 3)

# ä¾æ¬¡æ‰§è¡Œä»»åŠ¡
if is_system_active: mars_mission()
if is_system_active: mars_mission()
if is_system_active: mars_mission()
if is_system_active: mars_mission() # å°è¯•æ‰§è¡Œç¬¬å››æ¬¡ï¼Œä¼šæç¤ºä»»åŠ¡å·²å®Œæˆ

# åˆ›å»ºä¸€ä¸ªéœ€è¦æ›´å¤šèƒ½é‡çš„â€œæ·±ç©ºå¯¼èˆªâ€ä»»åŠ¡
deep_space_mission = mission_control("æ·±ç©ºå¯¼èˆª", 5)

# è¿™ä¸ªä»»åŠ¡å¯èƒ½ä¼šå› ä¸ºèƒ½é‡è€—å°½è€Œå¤±è´¥
while is_system_active and tasks_completed < 5: #
    deep_space_mission()
    if not is_system_active:
        break

# é¢„æœŸè¾“å‡º (ç”±äºéšæœºæ€§ï¼Œå…·ä½“æ•°å€¼ä¼šå˜åŒ–):
# å¯åŠ¨æœºå™¨äºº Alpha-007...
#
# [ä»»åŠ¡æ§åˆ¶å™¨] ç«æ˜Ÿåœ°è¡¨æ‰«æ å·²å¯åŠ¨ï¼Œèƒ½é‡: 100.0ï¼Œå¾…åŠä»»åŠ¡: 3ã€‚
# æ­£åœ¨æ‰§è¡Œä»»åŠ¡... (è€—èƒ½: 22.1)
# ä»»åŠ¡å®Œæˆï¼[å‰©ä½™èƒ½é‡: 77.9] [å·²å®Œæˆ: 1/3]
# æ­£åœ¨æ‰§è¡Œä»»åŠ¡... (è€—èƒ½: 18.3)
# ä»»åŠ¡å®Œæˆï¼[å‰©ä½™èƒ½é‡: 59.6] [å·²å®Œæˆ: 2/3]
# æ­£åœ¨æ‰§è¡Œä»»åŠ¡... (è€—èƒ½: 24.5)
# ä»»åŠ¡å®Œæˆï¼[å‰©ä½™èƒ½é‡: 35.1] [å·²å®Œæˆ: 3/3]
# âœ… ç«æ˜Ÿåœ°è¡¨æ‰«æ æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼
# ...
```

### ğŸ’¡ è®°å¿†è¦ç‚¹
- **è¦ç‚¹1**: **LEGB æŸ¥æ‰¾é¡ºåº**ï¼šPython æ‰¾å˜é‡çš„é¡ºåºæ˜¯ï¼šå…ˆ**å±€éƒ¨ (Local)**ï¼Œå†**é—­åŒ… (Enclosing)**ï¼Œç„¶å**å…¨å±€ (Global)**ï¼Œæœ€åæ˜¯**å†…ç½® (Built-in)**ã€‚è¿™ä¸ªé¡ºåºåˆ»åœ¨è„‘å­é‡Œã€‚
- **è¦ç‚¹2**: **ä¿®æ”¹é å£°æ˜ï¼Œè¯»å–éšæ„**ï¼šä½ å¯ä»¥è‡ªç”±åœ°è¯»å–å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†è¦**ä¿®æ”¹**å®ƒä»¬ï¼Œå¿…é¡»ç”¨ `global` å£°æ˜ä¿®æ”¹å…¨å±€å˜é‡ï¼Œç”¨ `nonlocal` å£°æ˜ä¿®æ”¹é—­åŒ…å˜é‡ã€‚
- **è¦ç‚¹3**: **è­¦æƒ•å¯å˜é»˜è®¤å‚æ•°**ï¼šå‡½æ•°çš„é»˜è®¤å‚æ•°åœ¨å®šä¹‰æ—¶åªåˆ›å»ºä¸€æ¬¡ã€‚ç»å¯¹ä¸è¦ç”¨åˆ—è¡¨ã€å­—å…¸ç­‰**å¯å˜ç±»å‹**åšé»˜è®¤å‚æ•°ï¼Œæ¨èçš„æ¨¡å¼æ˜¯ `def func(arg=None): if arg is None: arg = []`ã€‚