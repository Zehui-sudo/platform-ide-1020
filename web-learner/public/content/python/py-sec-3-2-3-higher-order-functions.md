å¥½çš„ï¼Œä½œä¸ºä¸€åé¡¶çº§çš„Pythonæ•™è‚²ä¸“å®¶ï¼Œæˆ‘å°†ä¸ºä½ ç”Ÿæˆå…³äº **é«˜é˜¶å‡½æ•° (map, filter)** çš„è¯¦ç»†æ•™å­¦å†…å®¹ã€‚å†…å®¹å°†ä¸¥æ ¼éµå¾ªä½ æä¾›çš„ç»“æ„å’Œé£æ ¼è¦æ±‚ï¼Œæ—¨åœ¨å¸®åŠ©å­¦ä¹ è€…å¾ªåºæ¸è¿›åœ°æŒæ¡è¿™ä¸ªå¼ºå¤§çš„ç¼–ç¨‹æ¦‚å¿µã€‚

---

## é«˜é˜¶å‡½æ•° (map, filter)

### ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

é«˜é˜¶å‡½æ•°æ˜¯æŒ‡é‚£äº›å¯ä»¥**æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°**ï¼Œæˆ–è€…**å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿”å›å€¼**çš„å‡½æ•°ã€‚`map` å’Œ `filter` å°±æ˜¯Pythonå†…ç½®çš„ä¸¤ä¸ªç»å…¸é«˜é˜¶å‡½æ•°ï¼Œå®ƒä»¬èƒ½è®©ä½ ç”¨æ›´ç®€æ´ã€æ›´å‡½æ•°å¼çš„æ–¹å¼æ¥å¤„ç†åºåˆ—æ•°æ®ï¼Œä»è€Œå‘Šåˆ«ç¹ççš„ `for` å¾ªç¯ã€‚

### ğŸ’¡ ä½¿ç”¨æ–¹å¼

- **`map(function, iterable)`**: åƒä¸€æ¡åŠ å·¥æµæ°´çº¿ï¼Œå®ƒå°† `function` åº”ç”¨äº `iterable` (å¦‚åˆ—è¡¨) ä¸­çš„**æ¯ä¸€ä¸ªå…ƒç´ **ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç»“æœçš„è¿­ä»£å™¨ã€‚
- **`filter(function, iterable)`**: åƒä¸€ä¸ªè´¨æ£€ç­›é€‰å™¨ï¼Œå®ƒå°† `function` åº”ç”¨äº `iterable` ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä½†åª**ä¿ç•™é‚£äº›ä½¿ `function` è¿”å› `True` çš„å…ƒç´ **ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¿™äº›å…ƒç´ çš„è¿­ä»£å™¨ã€‚

> **æ³¨æ„**ï¼š`map` å’Œ `filter` è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„**è¿­ä»£å™¨å¯¹è±¡**ï¼ˆiteratorï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›åˆ—è¡¨ã€‚ä½ éœ€è¦ç”¨ `list()` å‡½æ•°æ¥å°†å®ƒä»¬è½¬æ¢æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„åˆ—è¡¨ï¼Œä»¥ä¾¿æŸ¥çœ‹ç»“æœã€‚

### ğŸ“š Level 1: åŸºç¡€è®¤çŸ¥ï¼ˆ30ç§’ç†è§£ï¼‰

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹çœ‹ `map` å’Œ `filter` å¦‚ä½•æ–½å±•é­”æ³•ã€‚

```python
# å‡†å¤‡ä¸€ä¸ªæ•°å­—åˆ—è¡¨
numbers = [1, 2, 3, 4, 5, 6]

# === ä½¿ç”¨ mapï¼šå°†æ¯ä¸ªæ•°å­—éƒ½ä¹˜ä»¥ 2 ===
# ä¼ ç»Ÿ for å¾ªç¯å†™æ³•
# doubled_numbers = []
# for num in numbers:
#     doubled_numbers.append(num * 2)

# map çš„ç®€æ´å†™æ³•
def double(x):
    return x * 2

doubled_iterator = map(double, numbers)
doubled_numbers = list(doubled_iterator)
print(f"ä½¿ç”¨ map å°†åˆ—è¡¨æ¯ä¸ªå…ƒç´ ä¹˜ä»¥2: {doubled_numbers}")
# é¢„æœŸè¾“å‡º: ä½¿ç”¨ map å°†åˆ—è¡¨æ¯ä¸ªå…ƒç´ ä¹˜ä»¥2: [2, 4, 6, 8, 10, 12]


# === ä½¿ç”¨ filterï¼šåªä¿ç•™åˆ—è¡¨ä¸­çš„å¶æ•° ===
# ä¼ ç»Ÿ for å¾ªç¯å†™æ³•
# even_numbers = []
# for num in numbers:
#     if num % 2 == 0:
#         even_numbers.append(num)

# filter çš„ç®€æ´å†™æ³•
def is_even(x):
    return x % 2 == 0

even_iterator = filter(is_even, numbers)
even_numbers = list(even_iterator)
print(f"ä½¿ç”¨ filter ç­›é€‰å‡ºåˆ—è¡¨ä¸­çš„å¶æ•°: {even_numbers}")
# é¢„æœŸè¾“å‡º: ä½¿ç”¨ filter ç­›é€‰å‡ºåˆ—è¡¨ä¸­çš„å¶æ•°: [2, 4, 6]
```

### ğŸ“ˆ Level 2: æ ¸å¿ƒç‰¹æ€§ï¼ˆæ·±å…¥ç†è§£ï¼‰

`map` å’Œ `filter` çš„çœŸæ­£å¨åŠ›åœ¨äºå®ƒä»¬èƒ½ä¸ `lambda` åŒ¿åå‡½æ•°å®Œç¾ç»“åˆï¼Œä»¥åŠ `map` å¤„ç†å¤šä¸ªåºåˆ—çš„èƒ½åŠ›ã€‚

#### ç‰¹æ€§1: æ­é… `lambda` å‡½æ•°ï¼Œä»£ç æ›´ç´§å‡‘

åœ¨å‰é¢çš„ `Level 1` ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸º `map` å’Œ `filter` å•ç‹¬å®šä¹‰äº† `double` å’Œ `is_even` å‡½æ•°ã€‚å¦‚æœè¿™äº›å‡½æ•°åªç”¨ä¸€æ¬¡ï¼Œä½¿ç”¨ `lambda` ä¼šè®©ä»£ç æ›´åŠ ç®€æ´ä¼˜é›…ã€‚

```python
numbers = [1, 2, 3, 4, 5]

# ä½¿ç”¨ map å’Œ lambda å°†æ¯ä¸ªæ•°å­—çš„å¹³æ–¹
squared_numbers = list(map(lambda x: x ** 2, numbers))
print(f"map æ­é… lambda æ±‚å¹³æ–¹: {squared_numbers}")
# é¢„æœŸè¾“å‡º: map æ­é… lambda æ±‚å¹³æ–¹: [1, 4, 9, 16, 25]

# ä½¿ç”¨ filter å’Œ lambda ç­›é€‰å‡ºå¤§äº2çš„æ•°å­—
greater_than_two = list(filter(lambda x: x > 2, numbers))
print(f"filter æ­é… lambda ç­›é€‰: {greater_than_two}")
# é¢„æœŸè¾“å‡º: filter æ­é… lambda ç­›é€‰: [3, 4, 5]
```

#### ç‰¹æ€§2: `map` å¯ä»¥å¤„ç†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡

`map` å‡½æ•°å¯ä»¥æ¥æ”¶å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚æ­¤æ—¶ï¼Œå®ƒä¼šä»æ¯ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­å„å–ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä½ æä¾›çš„å‡½æ•°ã€‚

```python
# ä¸¤ä¸ªåˆ—è¡¨ï¼Œä»£è¡¨ä¸¤ç»„æˆç»©
scores_a = [90, 85, 78]
scores_b = [92, 88, 80]

# ä½¿ç”¨ map å’Œ lambda è®¡ç®—æ¯å¯¹æˆç»©çš„æ€»å’Œ
total_scores = list(map(lambda x, y: x + y, scores_a, scores_b))
print(f"ä½¿ç”¨ map å¤„ç†ä¸¤ä¸ªåˆ—è¡¨: {total_scores}")
# é¢„æœŸè¾“å‡º: ä½¿ç”¨ map å¤„ç†ä¸¤ä¸ªåˆ—è¡¨: [182, 173, 158]

# å¦‚æœåˆ—è¡¨é•¿åº¦ä¸åŒï¼Œmap ä¼šåœ¨æœ€çŸ­çš„åˆ—è¡¨è€—å°½æ—¶åœæ­¢
short_list = [1, 2]
long_list = [10, 20, 30, 40]
result = list(map(lambda x, y: x + y, short_list, long_list))
print(f"å¤„ç†ä¸åŒé•¿åº¦åˆ—è¡¨çš„ç»“æœ: {result}")
# é¢„æœŸè¾“å‡º: å¤„ç†ä¸åŒé•¿åº¦åˆ—è¡¨çš„ç»“æœ: [11, 22]
```

### ğŸ” Level 3: å¯¹æ¯”å­¦ä¹ ï¼ˆé¿å…é™·é˜±ï¼‰

åˆå­¦è€…æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯å¿˜è®° `map` å’Œ `filter` è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯åˆ—è¡¨ã€‚

```python
# === é”™è¯¯ç”¨æ³• ===
# âŒ ç›´æ¥æ‰“å° map å’Œ filter çš„è¿”å›ç»“æœ
numbers = [10, 20, 30]
map_result = map(lambda x: x / 10, numbers)
print(f"é”™è¯¯ç¤ºèŒƒï¼Œç›´æ¥æ‰“å° map ç»“æœ: {map_result}")
# è¾“å‡ºç»“æœç±»ä¼¼äº: é”™è¯¯ç¤ºèŒƒï¼Œç›´æ¥æ‰“å° map ç»“æœ: <map object at 0x10e8f2a10>
# è§£é‡Šï¼šè¿™æ‰“å°çš„æ˜¯ map å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚
# è¿­ä»£å™¨æ˜¯â€œæ‡’æƒ°çš„â€ï¼Œå®ƒåªåœ¨ä½ éœ€è¦æ•°æ®çš„æ—¶å€™æ‰å»è®¡ç®—ï¼Œæ‰€ä»¥ç›´æ¥æ‰“å°å®ƒæœ¬èº«ä¸ä¼šæ˜¾ç¤ºå†…å®¹ã€‚


# === æ­£ç¡®ç”¨æ³• ===
# âœ… ä½¿ç”¨ list() å°†è¿­ä»£å™¨è½¬æ¢ä¸ºåˆ—è¡¨
numbers = [10, 20, 30]
map_result = map(lambda x: x / 10, numbers)
# é€šè¿‡ list() å‡½æ•°â€œæ¿€æ´»â€è¿­ä»£å™¨ï¼Œè·å–æ‰€æœ‰è®¡ç®—ç»“æœ
correct_list = list(map_result)
print(f"æ­£ç¡®ç¤ºèŒƒï¼Œè½¬æ¢ä¸ºåˆ—è¡¨åæ‰“å°: {correct_list}")
# é¢„æœŸè¾“å‡º: æ­£ç¡®ç¤ºèŒƒï¼Œè½¬æ¢ä¸ºåˆ—è¡¨åæ‰“å°: [1.0, 2.0, 3.0]
# è§£é‡Šï¼šlist() ä¼šéå†æ•´ä¸ªè¿­ä»£å™¨ï¼Œå–å‡ºæ¯ä¸€ä¸ªè®¡ç®—ç»“æœï¼Œå¹¶æŠŠå®ƒä»¬æ”¶é›†åˆ°ä¸€ä¸ªæ–°çš„åˆ—è¡¨ä¸­ã€‚
# åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ for å¾ªç¯æ¥éå†è¿™ä¸ªè¿­ä»£å™¨ï¼š
# for item in map_result:
#     print(item)
```

### ğŸš€ Level 4: å®æˆ˜åº”ç”¨ï¼ˆçœŸå®åœºæ™¯ï¼‰

**åœºæ™¯ï¼š** ğŸš€ **æ˜Ÿé™…èˆ°é˜Ÿæˆå‘˜ç­›é€‰ä¸èƒ½åŠ›å¼ºåŒ–ç³»ç»Ÿ**

å‡è®¾ä½ æ˜¯ä¸€è‰˜æ˜Ÿé™…æˆ˜èˆ°çš„AIæŒ‡æŒ¥å®˜ã€‚ä½ æ”¶åˆ°äº†ä¸€ä»½æ–°å…µåå•ï¼Œå…¶ä¸­åŒ…å«ä»–ä»¬çš„å§“åã€æˆ˜æ–—åŠ›æŒ‡æ•°å’Œæ‰€å±ç§æ—ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1.  **ç­›é€‰**ï¼šä»åå•ä¸­ç­›é€‰å‡ºæˆ˜æ–—åŠ›æŒ‡æ•°é«˜äº1000çš„â€œç²¾è‹±â€èˆ¹å‘˜ã€‚
2.  **å¼ºåŒ–**ï¼šä¸ºè¿™äº›ç²¾è‹±èˆ¹å‘˜è¿›è¡Œèƒ½åŠ›å¼ºåŒ–ã€‚æ ¹æ®ç§æ—ä¸åŒï¼Œå¼ºåŒ–æ•ˆæœä¹Ÿä¸åŒï¼š
    -   äººç±»(Human): æˆ˜æ–—åŠ›æå‡20%
    -   ç“¦è‚¯äºº(Vulcan): æˆ˜æ–—åŠ›æå‡30% (å› ä¸ºä»–ä»¬é€»è¾‘æ€§æ›´å¼º)
    -   å…¶ä»–ç§æ—: æˆ˜æ–—åŠ›æå‡10%

```python
# æ–°å…µåå• (åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯å­—å…¸)
recruits = [
    {'name': 'Jack', 'power': 950, 'race': 'Human'},
    {'name': 'Spock', 'power': 1500, 'race': 'Vulcan'},
    {'name': 'Liara', 'power': 1200, 'race': 'Asari'},
    {'name': 'Shepard', 'power': 1100, 'race': 'Human'},
    {'name': 'Tali', 'power': 800, 'race': 'Quarian'}
]

print("--- åŸå§‹æ–°å…µåå• ---")
for r in recruits:
    print(r)

# 1. ç­›é€‰ï¼šä½¿ç”¨ filter é€‰å‡ºç²¾è‹±èˆ¹å‘˜ (power > 1000)
# lambda å‡½æ•°åˆ¤æ–­æ¯ä¸ªæ–°å…µçš„ power æ˜¯å¦å¤§äº 1000
elite_filter = filter(lambda recruit: recruit['power'] > 1000, recruits)
# å¿…é¡»è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œå¦åˆ™ filter å¯¹è±¡åªèƒ½ä½¿ç”¨ä¸€æ¬¡
elite_recruits = list(elite_filter)

print("\n--- ç­›é€‰å‡ºçš„ç²¾è‹±èˆ¹å‘˜ ---")
for r in elite_recruits:
    print(r)

# 2. å¼ºåŒ–ï¼šä½¿ç”¨ map å¯¹ç²¾è‹±èˆ¹å‘˜è¿›è¡Œèƒ½åŠ›å¼ºåŒ–
def enhance_power(recruit):
    # å¤åˆ¶ä¸€ä»½ï¼Œé¿å…ä¿®æ”¹åŸå§‹æ•°æ®
    enhanced_recruit = recruit.copy()
    power = enhanced_recruit['power']
    race = enhanced_recruit['race']

    if race == 'Human':
        enhanced_recruit['power'] = int(power * 1.2)
    elif race == 'Vulcan':
        enhanced_recruit['power'] = int(power * 1.3)
    else:
        enhanced_recruit['power'] = int(power * 1.1)
    
    enhanced_recruit['status'] = 'Enhanced' # æ·»åŠ ä¸€ä¸ªæ–°çŠ¶æ€
    return enhanced_recruit

# å°†å¼ºåŒ–å‡½æ•°åº”ç”¨åˆ°ç­›é€‰å‡ºçš„ç²¾è‹±èˆ¹å‘˜åˆ—è¡¨ä¸Š
enhanced_fleet_map = map(enhance_power, elite_recruits)
final_fleet = list(enhanced_fleet_map)

print("\n--- å¼ºåŒ–åçš„æœ€ç»ˆèˆ°é˜Ÿæˆå‘˜ ---")
for member in final_fleet:
    print(member)

# é¢„æœŸè¾“å‡º:
# --- åŸå§‹æ–°å…µåå• ---
# {'name': 'Jack', 'power': 950, 'race': 'Human'}
# {'name': 'Spock', 'power': 1500, 'race': 'Vulcan'}
# {'name': 'Liara', 'power': 1200, 'race': 'Asari'}
#